<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Media Upload Dashboard</title>
</head>
<body>
    <h1>üìÅ Admin Dashboard: Uploaded Files</h1>
    <h2>Upload Media</h2>
    <form action="/api/upload-form" method="post" enctype="multipart/form-data">
        <input type="file" name="file" required />
        <button type="submit">Upload</button>
    </form>

    <h3>Uploaded Files</h3>
    <ul>
        {% for f in files %}
        <li style="margin-bottom: 20px;">
            <strong>{{ f.filename }}</strong> ({{ f.filetype }})<br/>

            {% if f.filetype == 'images' %}
                <img src="{{ '/' + f.path }}" alt="{{ f.filename }}" width="200"/><br/>
            {% elif f.filetype == 'videos' %}
                <video width="320" height="240" controls>
                    <source src="{{ '/' + f.path }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video><br/>
            {% elif f.filetype == 'pdfs' %}
                <embed src="{{ '/' + f.path }}" type="application/pdf" width="100%" height="300px"/><br/>
            {% elif f.filetype == 'texts' %}
                <a href="{{ '/' + f.path }}" target="_blank">View Text</a><br/>
            {% else %}
                <a href="{{ '/' + f.path }}" target="_blank">Open File</a><br/>
            {% endif %}

            <form action="/api/delete-file" method="post" style="display:inline;">
                <input type="hidden" name="filename" value="{{ f.filename }}">
                <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
            </form>
        </li>
        {% endfor %}
    </ul>

</body>
</html>
