<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ user }}'s Media Dashboard</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
</head>
<body>
<div class="container">
    <h1>ğŸ“ Welcome, {{ user }}</h1>
    <h2 class="upload-section">Upload Media</h2>
    <form action="/api/upload-form" method="post" enctype="multipart/form-data">
        <input type="file" name="file" required />
        <button type="submit">Upload</button>
    </form>

    <h3>Uploaded Files</h3>
    {% for f in files %}
    <div class="file-card">
        <strong>{{ f.filename }}</strong> <span class="filetype">({{ f.filetype }})</span><br/>

        {% if f.filetype == 'images' %}
            <img src="{{ '/' + f.path }}" alt="{{ f.filename }}">
        {% elif f.filetype == 'videos' %}
            <video controls>
                <source src="{{ '/' + f.path }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        {% elif f.filetype == 'pdfs' %}
            <embed src="{{ '/' + f.path }}" type="application/pdf" width="100%" height="300px">
        {% elif f.filetype == 'texts' %}
            <a href="{{ '/' + f.path }}" target="_blank">ğŸ“„ View Text File</a>
        {% else %}
            <a href="{{ '/' + f.path }}" target="_blank">ğŸ“¦ Open File</a>
        {% endif %}

        <form action="/api/delete-file" method="post">
            <input type="hidden" name="filename" value="{{ f.filename }}">
            <button type="submit" onclick="return confirm('Are you sure you want to delete this file?')">Delete</button>
        </form>
    </div>
    {% endfor %}
</div>
</body>
</html>
